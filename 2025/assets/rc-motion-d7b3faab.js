import{k as ue,h as Me,i as be,a as Ne,_ as Oe,d as de,c as D,e as l,b as g,j as Re,g as Xe}from"./@babel-3e973216.js";import{c as Ye}from"./classnames-cee3b7bb.js";import{c as me,x as Ce,z as se,J as Ze,j as et,h as tt,s as nt,i as rt,L as at}from"./rc-util-09737ca6.js";import{r as o}from"./react-00db08bf.js";var it=["children"],De=o.createContext({});function xt(t){var e=t.children,n=ue(t,it);return o.createElement(De.Provider,{value:n},e)}var ot=function(t){Me(n,t);var e=be(n);function n(){return Ne(this,n),e.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(o.Component),O="none",X="appear",Y="enter",Z="leave",ke="none",k="prepare",$="start",z="active",pe="end",Ue="prepared";function Le(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function ut(t,e){var n={animationend:Le("Animation","AnimationEnd"),transitionend:Le("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var st=ut(me(),typeof window<"u"?window:{}),Ve={};if(me()){var ct=document.createElement("div");Ve=ct.style}var ee={};function we(t){if(ee[t])return ee[t];var e=st[t];if(e)for(var n=Object.keys(e),r=n.length,a=0;a<r;a+=1){var u=n[a];if(Object.prototype.hasOwnProperty.call(e,u)&&u in Ve)return ee[t]=e[u],ee[t]}return""}var je=we("animationend"),Fe=we("transitionend"),Ke=!!(je&&Fe),Pe=je||"animationend",_e=Fe||"transitionend";function xe(t,e){if(!t)return null;if(de(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const vt=function(t){var e=o.useRef();function n(a){a&&(a.removeEventListener(_e,t),a.removeEventListener(Pe,t))}function r(a){e.current&&e.current!==a&&n(e.current),a&&a!==e.current&&(a.addEventListener(_e,t),a.addEventListener(Pe,t),e.current=a)}return o.useEffect(function(){return function(){n(e.current)}},[]),[r,n]};var Ie=me()?o.useLayoutEffect:o.useEffect;const ft=function(){var t=o.useRef(null);function e(){Ce.cancel(t.current)}function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var u=Ce(function(){a<=1?r({isCanceled:function(){return u!==t.current}}):n(r,a-1)});t.current=u}return o.useEffect(function(){return function(){e()}},[]),[n,e]};var lt=[k,$,z,pe],dt=[k,Ue],Qe=!1,mt=!0;function $e(t){return t===z||t===pe}const pt=function(t,e,n){var r=se(ke),a=D(r,2),u=a[0],c=a[1],m=ft(),p=D(m,2),i=p[0],v=p[1];function s(){c(k,!0)}var f=e?dt:lt;return Ie(function(){if(u!==ke&&u!==pe){var d=f.indexOf(u),S=f[d+1],R=n(u);R===Qe?c(S,!0):S&&i(function(y){function x(){y.isCanceled()||c(S,!0)}R===!0?x():Promise.resolve(R).then(x)})}},[t,u]),o.useEffect(function(){return function(){v()}},[]),[s,u]};function Et(t,e,n,r){var a=r.motionEnter,u=a===void 0?!0:a,c=r.motionAppear,m=c===void 0?!0:c,p=r.motionLeave,i=p===void 0?!0:p,v=r.motionDeadline,s=r.motionLeaveImmediately,f=r.onAppearPrepare,d=r.onEnterPrepare,S=r.onLeavePrepare,R=r.onAppearStart,y=r.onEnterStart,x=r.onLeaveStart,M=r.onAppearActive,_=r.onEnterActive,W=r.onLeaveActive,b=r.onAppearEnd,T=r.onEnterEnd,U=r.onLeaveEnd,V=r.onVisibleChanged,te=se(),I=D(te,2),C=I[0],w=I[1],h=Ze(O),j=D(h,2),N=j[0],F=j[1],ne=se(null),Q=D(ne,2),ze=Q[0],Ee=Q[1],L=N(),J=o.useRef(!1),re=o.useRef(null);function q(){return n()}var Se=o.useRef(!1);function ye(){F(O),Ee(null,!0)}var he=et(function(A){var E=N();if(E!==O){var P=q();if(!(A&&!A.deadline&&A.target!==P)){var B=Se.current,G;E===X&&B?G=b==null?void 0:b(P,A):E===Y&&B?G=T==null?void 0:T(P,A):E===Z&&B&&(G=U==null?void 0:U(P,A)),B&&G!==!1&&ye()}}}),We=vt(he),He=D(We,1),Je=He[0],Ae=function(E){switch(E){case X:return g(g(g({},k,f),$,R),z,M);case Y:return g(g(g({},k,d),$,y),z,_);case Z:return g(g(g({},k,S),$,x),z,W);default:return{}}},H=o.useMemo(function(){return Ae(L)},[L]),qe=pt(L,!t,function(A){if(A===k){var E=H[k];return E?E(q()):Qe}if(K in H){var P;Ee(((P=H[K])===null||P===void 0?void 0:P.call(H,q(),null))||null)}return K===z&&L!==O&&(Je(q()),v>0&&(clearTimeout(re.current),re.current=setTimeout(function(){he({deadline:!0})},v))),K===Ue&&ye(),mt}),ge=D(qe,2),Be=ge[0],K=ge[1],Ge=$e(K);Se.current=Ge;var Te=o.useRef(null);Ie(function(){if(!(J.current&&Te.current===e)){w(e);var A=J.current;J.current=!0;var E;!A&&e&&m&&(E=X),A&&e&&u&&(E=Y),(A&&!e&&i||!A&&s&&!e&&i)&&(E=Z);var P=Ae(E);E&&(t||P[k])?(F(E),Be()):F(O),Te.current=e}},[e]),o.useEffect(function(){(L===X&&!m||L===Y&&!u||L===Z&&!i)&&F(O)},[m,u,i]),o.useEffect(function(){return function(){J.current=!1,clearTimeout(re.current)}},[]);var ae=o.useRef(!1);o.useEffect(function(){C&&(ae.current=!0),C!==void 0&&L===O&&((ae.current||C)&&(V==null||V(C)),ae.current=!0)},[C,L]);var ie=ze;return H[k]&&K===$&&(ie=l({transition:"none"},ie)),[L,K,ie,C??e]}function St(t){var e=t;de(t)==="object"&&(e=t.transitionSupport);function n(a,u){return!!(a.motionName&&e&&u!==!1)}var r=o.forwardRef(function(a,u){var c=a.visible,m=c===void 0?!0:c,p=a.removeOnLeave,i=p===void 0?!0:p,v=a.forceRender,s=a.children,f=a.motionName,d=a.leavedClassName,S=a.eventProps,R=o.useContext(De),y=R.motion,x=n(a,y),M=o.useRef(),_=o.useRef();function W(){try{return M.current instanceof HTMLElement?M.current:at(_.current)}catch{return null}}var b=Et(x,m,W,a),T=D(b,4),U=T[0],V=T[1],te=T[2],I=T[3],C=o.useRef(I);I&&(C.current=!0);var w=o.useCallback(function(Q){M.current=Q,tt(u,Q)},[u]),h,j=l(l({},S),{},{visible:m});if(!s)h=null;else if(U===O)I?h=s(l({},j),w):!i&&C.current&&d?h=s(l(l({},j),{},{className:d}),w):v||!i&&!d?h=s(l(l({},j),{},{style:{display:"none"}}),w):h=null;else{var N;V===k?N="prepare":$e(V)?N="active":V===$&&(N="start");var F=xe(f,"".concat(U,"-").concat(N));h=s(l(l({},j),{},{className:Ye(xe(f,U),g(g({},F,F&&N),f,typeof f=="string")),style:te}),w)}if(o.isValidElement(h)&&nt(h)){var ne=rt(h);ne||(h=o.cloneElement(h,{ref:w}))}return o.createElement(ot,{ref:_},h)});return r.displayName="CSSMotion",r}const yt=St(Ke);var ce="add",ve="keep",fe="remove",oe="removed";function ht(t){var e;return t&&de(t)==="object"&&"key"in t?e=t:e={key:t},l(l({},e),{},{key:String(e.key)})}function le(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(ht)}function At(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,a=e.length,u=le(t),c=le(e);u.forEach(function(i){for(var v=!1,s=r;s<a;s+=1){var f=c[s];if(f.key===i.key){r<s&&(n=n.concat(c.slice(r,s).map(function(d){return l(l({},d),{},{status:ce})})),r=s),n.push(l(l({},f),{},{status:ve})),r+=1,v=!0;break}}v||n.push(l(l({},i),{},{status:fe}))}),r<a&&(n=n.concat(c.slice(r).map(function(i){return l(l({},i),{},{status:ce})})));var m={};n.forEach(function(i){var v=i.key;m[v]=(m[v]||0)+1});var p=Object.keys(m).filter(function(i){return m[i]>1});return p.forEach(function(i){n=n.filter(function(v){var s=v.key,f=v.status;return s!==i||f!==fe}),n.forEach(function(v){v.key===i&&(v.status=ve)})}),n}var gt=["component","children","onVisibleChanged","onAllRemoved"],Tt=["status"],Rt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Ct(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yt,n=function(r){Me(u,r);var a=be(u);function u(){var c;Ne(this,u);for(var m=arguments.length,p=new Array(m),i=0;i<m;i++)p[i]=arguments[i];return c=a.call.apply(a,[this].concat(p)),g(Re(c),"state",{keyEntities:[]}),g(Re(c),"removeKey",function(v){c.setState(function(s){var f=s.keyEntities.map(function(d){return d.key!==v?d:l(l({},d),{},{status:oe})});return{keyEntities:f}},function(){var s=c.state.keyEntities,f=s.filter(function(d){var S=d.status;return S!==oe}).length;f===0&&c.props.onAllRemoved&&c.props.onAllRemoved()})}),c}return Oe(u,[{key:"render",value:function(){var m=this,p=this.state.keyEntities,i=this.props,v=i.component,s=i.children,f=i.onVisibleChanged;i.onAllRemoved;var d=ue(i,gt),S=v||o.Fragment,R={};return Rt.forEach(function(y){R[y]=d[y],delete d[y]}),delete d.keys,o.createElement(S,d,p.map(function(y,x){var M=y.status,_=ue(y,Tt),W=M===ce||M===ve;return o.createElement(e,Xe({},R,{key:_.key,visible:W,eventProps:_,onVisibleChanged:function(T){f==null||f(T,{key:_.key}),T||m.removeKey(_.key)}}),function(b,T){return s(l(l({},b),{},{index:x}),T)})}))}}],[{key:"getDerivedStateFromProps",value:function(m,p){var i=m.keys,v=p.keyEntities,s=le(i),f=At(v,s);return{keyEntities:f.filter(function(d){var S=v.find(function(R){var y=R.key;return d.key===y});return!(S&&S.status===oe&&d.status===fe)})}}}]),u}(o.Component);return g(n,"defaultProps",{component:"div"}),n}const Mt=Ct(Ke);export{yt as C,xt as M,Mt as a};
