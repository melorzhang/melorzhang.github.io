import{r as t,a as En}from"./react-00db08bf.js";import{K as I,w as ft,N as vt,f as mt,B as pn,b as pt,m as gt,e as ht,u as bt,C as xn,o as St,z as wt,c as Ct,y as It}from"./rc-util-7b686e84.js";import{c as Ue}from"./classnames-cee3b7bb.js";import{F as yt}from"./rc-overflow-a40a59d2.js";import"./react-dom-a3d1ea1f.js";import"./rc-resize-observer-9b0f7ff6.js";import"./rc-motion-c0cfda94.js";import{d as gn,c as ee,k as Je,e as B,b as Z,g as We,o as Et,f as Re}from"./@babel-3e973216.js";import{T as Rt}from"./@rc-component-415d57ed.js";import{L as xt}from"./rc-virtual-list-2144575c.js";var hn=function(e){var o=e.className,a=e.customizeIcon,r=e.customizeIconProps,i=e.children,u=e.onMouseDown,c=e.onClick,s=typeof a=="function"?a(r):a;return t.createElement("span",{className:o,onMouseDown:function(d){d.preventDefault(),u==null||u(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:c,"aria-hidden":!0},s!==void 0?s:t.createElement("span",{className:Ue(o.split(/\s+/).map(function(m){return"".concat(m,"-icon")}))},i))},Dt=function(e,o,a,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,c=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,m=En.useMemo(function(){if(gn(r)==="object")return r.clearIcon;if(i)return i},[r,i]),d=En.useMemo(function(){return!!(!u&&r&&(a.length||c)&&!(s==="combobox"&&c===""))},[r,u,a.length,c,s]);return{allowClear:d,clearIcon:En.createElement(hn,{className:"".concat(e,"-clear"),onMouseDown:o,customizeIcon:m},"×")}},zn=t.createContext(null);function Mt(){return t.useContext(zn)}function Ot(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),o=ee(e,2),a=o[0],r=o[1],i=t.useRef(null),u=function(){window.clearTimeout(i.current)};t.useEffect(function(){return u},[]);var c=function(m,d){u(),i.current=window.setTimeout(function(){r(m),d&&d()},n)};return[a,c,u]}function Hn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),o=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function a(r){(r||e.current===null)&&(e.current=r),window.clearTimeout(o.current),o.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},a]}function Pt(n,e,o,a){var r=t.useRef(null);r.current={open:e,triggerOpen:o,customizedTrigger:a},t.useEffect(function(){function i(u){var c;if(!((c=r.current)!==null&&c!==void 0&&c.customizedTrigger)){var s=u.target;s.shadowRoot&&u.composed&&(s=u.composedPath()[0]||s),r.current.open&&n().filter(function(m){return m}).every(function(m){return!m.contains(s)&&m!==s})&&r.current.triggerOpen(!1)}}return window.addEventListener("mousedown",i),function(){return window.removeEventListener("mousedown",i)}},[])}function Nt(n){return n&&![I.ESC,I.SHIFT,I.BACKSPACE,I.TAB,I.WIN_KEY,I.ALT,I.META,I.WIN_KEY_RIGHT,I.CTRL,I.SEMICOLON,I.EQUALS,I.CAPS_LOCK,I.CONTEXT_MENU,I.F1,I.F2,I.F3,I.F4,I.F5,I.F6,I.F7,I.F8,I.F9,I.F10,I.F11,I.F12].includes(n)}var Vt=["prefixCls","id","inputElement","autoFocus","autoComplete","editable","activeDescendantId","value","open","attrs"],Tt=function(e,o){var a=e.prefixCls,r=e.id,i=e.inputElement,u=e.autoFocus,c=e.autoComplete,s=e.editable,m=e.activeDescendantId,d=e.value,h=e.open,P=e.attrs,l=Je(e,Vt),C=i||t.createElement("input",null),S=C,y=S.ref,N=S.props;return ft(!("maxLength"in C.props)),C=t.cloneElement(C,B(B(B({type:"search"},vt(l,N,!0)),{},{id:r,ref:mt(o,y),autoComplete:c||"off",autoFocus:u,className:Ue("".concat(a,"-selection-search-input"),N==null?void 0:N.className),role:"combobox","aria-expanded":h||!1,"aria-haspopup":"listbox","aria-owns":"".concat(r,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(r,"_list"),"aria-activedescendant":h?m:void 0},P),{},{value:s?d:"",readOnly:!s,unselectable:s?null:"on",style:B(B({},N.style),{},{opacity:s?null:0})})),C},Un=t.forwardRef(Tt);function jn(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var _t=typeof window<"u"&&window.document&&window.document.documentElement,At=_t;function Lt(n){return n!=null}function Ft(n){return!n&&n!==0}function Fn(n){return["string","number"].includes(gn(n))}function Gn(n){var e=void 0;return n&&(Fn(n.title)?e=n.title.toString():Fn(n.label)&&(e=n.label.toString())),e}function kt(n,e){At?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Kt(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var kn=function(e){e.preventDefault(),e.stopPropagation()},Bt=function(e){var o=e.id,a=e.prefixCls,r=e.values,i=e.open,u=e.searchValue,c=e.autoClearSearchValue,s=e.inputRef,m=e.placeholder,d=e.disabled,h=e.mode,P=e.showSearch,l=e.autoFocus,C=e.autoComplete,S=e.activeDescendantId,y=e.tabIndex,N=e.removeIcon,oe=e.maxTagCount,H=e.maxTagTextLength,V=e.maxTagPlaceholder,ne=V===void 0?function(A){return"+ ".concat(A.length," ...")}:V,te=e.tagRender,le=e.onToggleOpen,fe=e.onRemove,U=e.onInputChange,ce=e.onInputPaste,G=e.onInputKeyDown,k=e.onInputMouseDown,Q=e.onInputCompositionStart,X=e.onInputCompositionEnd,$=e.onInputBlur,ue=t.useRef(null),Y=t.useState(0),se=ee(Y,2),W=se[0],T=se[1],D=t.useState(!1),ie=ee(D,2),Ie=ie[0],he=ie[1],j="".concat(a,"-selection"),Ne=i||h==="multiple"&&c===!1||h==="tags"?u:"",q=h==="tags"||h==="multiple"&&c===!1||P&&(i||Ie);kt(function(){T(ue.current.scrollWidth)},[Ne]);var ke=function(g,M,L,z,F){return t.createElement("span",{title:Gn(g),className:Ue("".concat(j,"-item"),Z({},"".concat(j,"-item-disabled"),L))},t.createElement("span",{className:"".concat(j,"-item-content")},M),z&&t.createElement(hn,{className:"".concat(j,"-item-remove"),onMouseDown:kn,onClick:F,customizeIcon:N},"×"))},De=function(g,M,L,z,F,me){var xe=function(Te){kn(Te),le(!i)};return t.createElement("span",{onMouseDown:xe},te({label:M,value:g,disabled:L,closable:z,onClose:F,isMaxTag:!!me}))},ve=function(g){var M=g.disabled,L=g.label,z=g.value,F=!d&&!M,me=L;if(typeof H=="number"&&(typeof L=="string"||typeof L=="number")){var xe=String(me);xe.length>H&&(me="".concat(xe.slice(0,H),"..."))}var Ve=function(J){J&&J.stopPropagation(),fe(g)};return typeof te=="function"?De(z,me,M,F,Ve):ke(g,me,M,F,Ve)},E=function(g){if(!r.length)return null;var M=typeof ne=="function"?ne(g):ne;return typeof te=="function"?De(void 0,M,!1,!1,void 0,!0):ke({title:M},M,!1)},f=t.createElement("div",{className:"".concat(j,"-search"),style:{width:W},onFocus:function(){he(!0)},onBlur:function(){he(!1)}},t.createElement(Un,{ref:s,open:i,prefixCls:a,id:o,inputElement:null,disabled:d,autoFocus:l,autoComplete:C,editable:q,activeDescendantId:S,value:Ne,onKeyDown:G,onMouseDown:k,onChange:U,onPaste:ce,onCompositionStart:Q,onCompositionEnd:X,onBlur:$,tabIndex:y,attrs:pn(e,!0)}),t.createElement("span",{ref:ue,className:"".concat(j,"-search-mirror"),"aria-hidden":!0},Ne," ")),x=t.createElement(yt,{prefixCls:"".concat(j,"-overflow"),data:r,renderItem:ve,renderRest:E,suffix:f,itemKey:Kt,maxCount:oe});return t.createElement("span",{className:"".concat(j,"-wrap")},x,!r.length&&!Ne&&t.createElement("span",{className:"".concat(j,"-placeholder")},m))},$t=function(e){var o=e.inputElement,a=e.prefixCls,r=e.id,i=e.inputRef,u=e.disabled,c=e.autoFocus,s=e.autoComplete,m=e.activeDescendantId,d=e.mode,h=e.open,P=e.values,l=e.placeholder,C=e.tabIndex,S=e.showSearch,y=e.searchValue,N=e.activeValue,oe=e.maxLength,H=e.onInputKeyDown,V=e.onInputMouseDown,ne=e.onInputChange,te=e.onInputPaste,le=e.onInputCompositionStart,fe=e.onInputCompositionEnd,U=e.onInputBlur,ce=e.title,G=t.useState(!1),k=ee(G,2),Q=k[0],X=k[1],$=d==="combobox",ue=$||S,Y=P[0],se=y||"";$&&N&&!Q&&(se=N),t.useEffect(function(){$&&X(!1)},[$,N]);var W=d!=="combobox"&&!h&&!S?!1:!!se,T=ce===void 0?Gn(Y):ce,D=t.useMemo(function(){return Y?null:t.createElement("span",{className:"".concat(a,"-selection-placeholder"),style:W?{visibility:"hidden"}:void 0},l)},[Y,W,l,a]);return t.createElement("span",{className:"".concat(a,"-selection-wrap")},t.createElement("span",{className:"".concat(a,"-selection-search")},t.createElement(Un,{ref:i,prefixCls:a,id:r,open:h,inputElement:o,disabled:u,autoFocus:c,autoComplete:s,editable:ue,activeDescendantId:m,value:se,onKeyDown:H,onMouseDown:V,onChange:function(Ie){X(!0),ne(Ie)},onPaste:te,onCompositionStart:le,onCompositionEnd:fe,onBlur:U,tabIndex:C,attrs:pn(e,!0),maxLength:$?oe:void 0})),!$&&Y?t.createElement("span",{className:"".concat(a,"-selection-item"),title:T,style:W?{visibility:"hidden"}:void 0},Y.label):null,D)},Wt=function(e,o){var a=t.useRef(null),r=t.useRef(!1),i=e.prefixCls,u=e.open,c=e.mode,s=e.showSearch,m=e.tokenWithEnter,d=e.disabled,h=e.prefix,P=e.autoClearSearchValue,l=e.onSearch,C=e.onSearchSubmit,S=e.onToggleOpen,y=e.onInputKeyDown,N=e.onInputBlur,oe=e.domRef;t.useImperativeHandle(o,function(){return{focus:function(T){a.current.focus(T)},blur:function(){a.current.blur()}}});var H=Hn(0),V=ee(H,2),ne=V[0],te=V[1],le=function(T){var D=T.which,ie=a.current instanceof HTMLTextAreaElement;!ie&&u&&(D===I.UP||D===I.DOWN)&&T.preventDefault(),y&&y(T),D===I.ENTER&&c==="tags"&&!r.current&&!u&&(C==null||C(T.target.value)),!(ie&&!u&&~[I.UP,I.DOWN,I.LEFT,I.RIGHT].indexOf(D))&&Nt(D)&&S(!0)},fe=function(){te(!0)},U=t.useRef(null),ce=function(T){l(T,!0,r.current)!==!1&&S(!0)},G=function(){r.current=!0},k=function(T){r.current=!1,c!=="combobox"&&ce(T.target.value)},Q=function(T){var D=T.target.value;if(m&&U.current&&/[\r\n]/.test(U.current)){var ie=U.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");D=D.replace(ie,U.current)}U.current=null,ce(D)},X=function(T){var D=T.clipboardData,ie=D==null?void 0:D.getData("text");U.current=ie||""},$=function(T){var D=T.target;if(D!==a.current){var ie=document.body.style.msTouchAction!==void 0;ie?setTimeout(function(){a.current.focus()}):a.current.focus()}},ue=function(T){var D=ne();T.target!==a.current&&!D&&!(c==="combobox"&&d)&&T.preventDefault(),(c!=="combobox"&&(!s||!D)||!u)&&(u&&P!==!1&&l("",!0,!1),S())},Y={inputRef:a,onInputKeyDown:le,onInputMouseDown:fe,onInputChange:Q,onInputPaste:X,onInputCompositionStart:G,onInputCompositionEnd:k,onInputBlur:N},se=c==="multiple"||c==="tags"?t.createElement(Bt,We({},e,Y)):t.createElement($t,We({},e,Y));return t.createElement("div",{ref:oe,className:"".concat(i,"-selector"),onClick:$,onMouseDown:ue},h&&t.createElement("div",{className:"".concat(i,"-prefix")},h),se)},zt=t.forwardRef(Wt),Ht=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Ut=function(e){var o=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},jt=function(e,o){var a=e.prefixCls;e.disabled;var r=e.visible,i=e.children,u=e.popupElement,c=e.animation,s=e.transitionName,m=e.dropdownStyle,d=e.dropdownClassName,h=e.direction,P=h===void 0?"ltr":h,l=e.placement,C=e.builtinPlacements,S=e.dropdownMatchSelectWidth,y=e.dropdownRender,N=e.dropdownAlign,oe=e.getPopupContainer,H=e.empty,V=e.getTriggerDOMNode,ne=e.onPopupVisibleChange,te=e.onPopupMouseEnter,le=Je(e,Ht),fe="".concat(a,"-dropdown"),U=u;y&&(U=y(u));var ce=t.useMemo(function(){return C||Ut(S)},[C,S]),G=c?"".concat(fe,"-").concat(c):s,k=typeof S=="number",Q=t.useMemo(function(){return k?null:S===!1?"minWidth":"width"},[S,k]),X=m;k&&(X=B(B({},X),{},{width:S}));var $=t.useRef(null);return t.useImperativeHandle(o,function(){return{getPopupElement:function(){var Y;return(Y=$.current)===null||Y===void 0?void 0:Y.popupElement}}}),t.createElement(Rt,We({},le,{showAction:ne?["click"]:[],hideAction:ne?["click"]:[],popupPlacement:l||(P==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:ce,prefixCls:fe,popupTransitionName:G,popup:t.createElement("div",{onMouseEnter:te},U),ref:$,stretch:Q,popupAlign:N,popupVisible:r,getPopupContainer:oe,popupClassName:Ue(d,Z({},"".concat(fe,"-empty"),H)),popupStyle:X,getTriggerDOMNode:V,onPopupVisibleChange:ne}),i)},Gt=t.forwardRef(jt);function Kn(n,e){var o=n.key,a;return"value"in n&&(a=n.value),o??(a!==void 0?a:"rc-index-key-".concat(e))}function Dn(n){return typeof n<"u"&&!Number.isNaN(n)}function Xn(n,e){var o=n||{},a=o.label,r=o.value,i=o.options,u=o.groupLabel,c=a||(e?"children":"label");return{label:c,value:r||"value",options:i||"options",groupLabel:u||c}}function Xt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.fieldNames,a=e.childrenAsData,r=[],i=Xn(o,!1),u=i.label,c=i.value,s=i.options,m=i.groupLabel;function d(h,P){Array.isArray(h)&&h.forEach(function(l){if(P||!(s in l)){var C=l[c];r.push({key:Kn(l,r.length),groupOption:P,data:l,label:l[u],value:C})}else{var S=l[m];S===void 0&&a&&(S=l.label),r.push({key:Kn(l,r.length),group:!0,data:l,label:S}),d(l[s],!0)}})}return d(n,!1),r}function Mn(n){var e=B({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return pt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var Yt=function(e,o,a){if(!o||!o.length)return null;var r=!1,i=function c(s,m){var d=Et(m),h=d[0],P=d.slice(1);if(!h)return[s];var l=s.split(h);return r=r||l.length>1,l.reduce(function(C,S){return[].concat(Re(C),Re(c(S,P)))},[]).filter(Boolean)},u=i(e,o);return r?typeof a<"u"?u.slice(0,a):u:null},Pn=t.createContext(null);function Jt(n){var e=n.visible,o=n.values;if(!e)return null;var a=50;return t.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,a).map(function(r){var i=r.label,u=r.value;return["number","string"].includes(gn(i))?i:u}).join(", ")),o.length>a?", ...":null)}var Qt=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],qt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],On=function(e){return e==="tags"||e==="multiple"},Zt=t.forwardRef(function(n,e){var o,a=n.id,r=n.prefixCls,i=n.className,u=n.showSearch,c=n.tagRender,s=n.direction,m=n.omitDomProps,d=n.displayValues,h=n.onDisplayValuesChange,P=n.emptyOptions,l=n.notFoundContent,C=l===void 0?"Not Found":l,S=n.onClear,y=n.mode,N=n.disabled,oe=n.loading,H=n.getInputElement,V=n.getRawInputElement,ne=n.open,te=n.defaultOpen,le=n.onDropdownVisibleChange,fe=n.activeValue,U=n.onActiveValueChange,ce=n.activeDescendantId,G=n.searchValue,k=n.autoClearSearchValue,Q=n.onSearch,X=n.onSearchSplit,$=n.tokenSeparators,ue=n.allowClear,Y=n.prefix,se=n.suffixIcon,W=n.clearIcon,T=n.OptionList,D=n.animation,ie=n.transitionName,Ie=n.dropdownStyle,he=n.dropdownClassName,j=n.dropdownMatchSelectWidth,Ne=n.dropdownRender,q=n.dropdownAlign,ke=n.placement,De=n.builtinPlacements,ve=n.getPopupContainer,E=n.showAction,f=E===void 0?[]:E,x=n.onFocus,A=n.onBlur,g=n.onKeyUp,M=n.onKeyDown,L=n.onMouseDown,z=Je(n,Qt),F=On(y),me=(u!==void 0?u:F)||y==="combobox",xe=B({},z);qt.forEach(function(O){delete xe[O]}),m==null||m.forEach(function(O){delete xe[O]});var Ve=t.useState(!1),Te=ee(Ve,2),J=Te[0],Qe=Te[1];t.useEffect(function(){Qe(gt())},[]);var je=t.useRef(null),pe=t.useRef(null),be=t.useRef(null),Se=t.useRef(null),ye=t.useRef(null),Me=t.useRef(!1),tn=Ot(),_e=ee(tn,3),Ae=_e[0],Oe=_e[1],bn=_e[2];t.useImperativeHandle(e,function(){var O,R;return{focus:(O=Se.current)===null||O===void 0?void 0:O.focus,blur:(R=Se.current)===null||R===void 0?void 0:R.blur,scrollTo:function(Ce){var re;return(re=ye.current)===null||re===void 0?void 0:re.scrollTo(Ce)},nativeElement:je.current||pe.current}});var Pe=t.useMemo(function(){var O;if(y!=="combobox")return G;var R=(O=d[0])===null||O===void 0?void 0:O.value;return typeof R=="string"||typeof R=="number"?String(R):""},[G,y,d]),un=y==="combobox"&&typeof H=="function"&&H()||null,Ee=typeof V=="function"&&V(),Sn=ht(pe,Ee==null||(o=Ee.props)===null||o===void 0?void 0:o.ref),ln=t.useState(!1),cn=ee(ln,2),wn=cn[0],sn=cn[1];bt(function(){sn(!0)},[]);var dn=xn(!1,{defaultValue:te,value:ne}),Ge=ee(dn,2),an=Ge[0],rn=Ge[1],ae=wn?an:!1,fn=!C&&P;(N||fn&&ae&&y==="combobox")&&(ae=!1);var qe=fn?!1:ae,v=t.useCallback(function(O){var R=O!==void 0?O:!ae;N||(rn(R),ae!==R&&(le==null||le(R)))},[N,ae,rn,le]),w=t.useMemo(function(){return($||[]).some(function(O){return[`
`,`\r
`].includes(O)})},[$]),p=t.useContext(Pn)||{},b=p.maxCount,_=p.rawValues,K=function(R,we,Ce){if(!(F&&Dn(b)&&(_==null?void 0:_.size)>=b)){var re=!0,ge=R;U==null||U(null);var $e=Yt(R,$,Dn(b)?b-_.size:void 0),Fe=Ce?null:$e;return y!=="combobox"&&Fe&&(ge="",X==null||X(Fe),v(!1),re=!1),Q&&Pe!==ge&&Q(ge,{source:we?"typing":"effect"}),re}},Ke=function(R){!R||!R.trim()||Q(R,{source:"submit"})};t.useEffect(function(){!ae&&!F&&y!=="combobox"&&K("",!1,!1)},[ae]),t.useEffect(function(){an&&N&&rn(!1),N&&!Me.current&&Oe(!1)},[N]);var Le=Hn(),ze=ee(Le,2),de=ze[0],He=ze[1],Ze=t.useRef(!1),Cn=function(R){var we=de(),Ce=R.key,re=Ce==="Enter";if(re&&(y!=="combobox"&&R.preventDefault(),ae||v(!0)),He(!!Pe),Ce==="Backspace"&&!we&&F&&!Pe&&d.length){for(var ge=Re(d),$e=null,Fe=ge.length-1;Fe>=0;Fe-=1){var Xe=ge[Fe];if(!Xe.disabled){ge.splice(Fe,1),$e=Xe;break}}$e&&h(ge,{type:"remove",values:[$e]})}for(var nn=arguments.length,Ye=new Array(nn>1?nn-1:0),vn=1;vn<nn;vn++)Ye[vn-1]=arguments[vn];if(ae&&(!re||!Ze.current)){var mn;re&&(Ze.current=!0),(mn=ye.current)===null||mn===void 0||mn.onKeyDown.apply(mn,[R].concat(Ye))}M==null||M.apply(void 0,[R].concat(Ye))},Nn=function(R){for(var we=arguments.length,Ce=new Array(we>1?we-1:0),re=1;re<we;re++)Ce[re-1]=arguments[re];if(ae){var ge;(ge=ye.current)===null||ge===void 0||ge.onKeyUp.apply(ge,[R].concat(Ce))}R.key==="Enter"&&(Ze.current=!1),g==null||g.apply(void 0,[R].concat(Ce))},on=function(R){var we=d.filter(function(Ce){return Ce!==R});h(we,{type:"remove",values:[R]})},Be=function(){Ze.current=!1},In=t.useRef(!1),Zn=function(){Oe(!0),N||(x&&!In.current&&x.apply(void 0,arguments),f.includes("focus")&&v(!0)),In.current=!0},et=function(){Me.current=!0,Oe(!1,function(){In.current=!1,Me.current=!1,v(!1)}),!N&&(Pe&&(y==="tags"?Q(Pe,{source:"submit"}):y==="multiple"&&Q("",{source:"blur"})),A&&A.apply(void 0,arguments))},en=[];t.useEffect(function(){return function(){en.forEach(function(O){return clearTimeout(O)}),en.splice(0,en.length)}},[]);var nt=function(R){var we,Ce=R.target,re=(we=be.current)===null||we===void 0?void 0:we.getPopupElement();if(re&&re.contains(Ce)){var ge=setTimeout(function(){var nn=en.indexOf(ge);if(nn!==-1&&en.splice(nn,1),bn(),!J&&!re.contains(document.activeElement)){var Ye;(Ye=Se.current)===null||Ye===void 0||Ye.focus()}});en.push(ge)}for(var $e=arguments.length,Fe=new Array($e>1?$e-1:0),Xe=1;Xe<$e;Xe++)Fe[Xe-1]=arguments[Xe];L==null||L.apply(void 0,[R].concat(Fe))},tt=t.useState({}),at=ee(tt,2),rt=at[1];function ot(){rt({})}var Vn;Ee&&(Vn=function(R){v(R)}),Pt(function(){var O;return[je.current,(O=be.current)===null||O===void 0?void 0:O.getPopupElement()]},qe,v,!!Ee);var ut=t.useMemo(function(){return B(B({},n),{},{notFoundContent:C,open:ae,triggerOpen:qe,id:a,showSearch:me,multiple:F,toggleOpen:v})},[n,C,qe,ae,a,me,F,v]),Tn=!!se||oe,_n;Tn&&(_n=t.createElement(hn,{className:Ue("".concat(r,"-arrow"),Z({},"".concat(r,"-arrow-loading"),oe)),customizeIcon:se,customizeIconProps:{loading:oe,searchValue:Pe,open:ae,focused:Ae,showSearch:me}}));var it=function(){var R;S==null||S(),(R=Se.current)===null||R===void 0||R.focus(),h([],{type:"clear",values:d}),K("",!1,!1)},An=Dt(r,it,d,ue,W,N,Pe,y),lt=An.allowClear,ct=An.clearIcon,st=t.createElement(T,{ref:ye}),dt=Ue(r,i,Z(Z(Z(Z(Z(Z(Z(Z(Z(Z({},"".concat(r,"-focused"),Ae),"".concat(r,"-multiple"),F),"".concat(r,"-single"),!F),"".concat(r,"-allow-clear"),ue),"".concat(r,"-show-arrow"),Tn),"".concat(r,"-disabled"),N),"".concat(r,"-loading"),oe),"".concat(r,"-open"),ae),"".concat(r,"-customize-input"),un),"".concat(r,"-show-search"),me)),Ln=t.createElement(Gt,{ref:be,disabled:N,prefixCls:r,visible:qe,popupElement:st,animation:D,transitionName:ie,dropdownStyle:Ie,dropdownClassName:he,direction:s,dropdownMatchSelectWidth:j,dropdownRender:Ne,dropdownAlign:q,placement:ke,builtinPlacements:De,getPopupContainer:ve,empty:P,getTriggerDOMNode:function(R){return pe.current||R},onPopupVisibleChange:Vn,onPopupMouseEnter:ot},Ee?t.cloneElement(Ee,{ref:Sn}):t.createElement(zt,We({},n,{domRef:pe,prefixCls:r,inputElement:un,ref:Se,id:a,prefix:Y,showSearch:me,autoClearSearchValue:k,mode:y,activeDescendantId:ce,tagRender:c,values:d,open:ae,onToggleOpen:v,activeValue:fe,searchValue:Pe,onSearch:K,onSearchSubmit:Ke,onRemove:on,tokenWithEnter:w,onInputBlur:Be}))),yn;return Ee?yn=Ln:yn=t.createElement("div",We({className:dt},xe,{ref:je,onMouseDown:nt,onKeyDown:Cn,onKeyUp:Nn,onFocus:Zn,onBlur:et}),t.createElement(Jt,{visible:Ae&&!ae,values:d}),Ln,_n,lt&&ct),t.createElement(zn.Provider,{value:ut},yn)}),Yn=function(){return null};Yn.isSelectOptGroup=!0;var Jn=function(){return null};Jn.isSelectOption=!0;function ea(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var na=["disabled","title","children","style","className"];function Bn(n){return typeof n=="string"||typeof n=="number"}var ta=function(e,o){var a=Mt(),r=a.prefixCls,i=a.id,u=a.open,c=a.multiple,s=a.mode,m=a.searchValue,d=a.toggleOpen,h=a.notFoundContent,P=a.onPopupScroll,l=t.useContext(Pn),C=l.maxCount,S=l.flattenOptions,y=l.onActiveValue,N=l.defaultActiveFirstOption,oe=l.onSelect,H=l.menuItemSelectedIcon,V=l.rawValues,ne=l.fieldNames,te=l.virtual,le=l.direction,fe=l.listHeight,U=l.listItemHeight,ce=l.optionRender,G="".concat(r,"-item"),k=St(function(){return S},[u,S],function(E,f){return f[0]&&E[1]!==f[1]}),Q=t.useRef(null),X=t.useMemo(function(){return c&&Dn(C)&&(V==null?void 0:V.size)>=C},[c,C,V==null?void 0:V.size]),$=function(f){f.preventDefault()},ue=function(f){var x;(x=Q.current)===null||x===void 0||x.scrollTo(typeof f=="number"?{index:f}:f)},Y=t.useCallback(function(E){return s==="combobox"?!1:V.has(E)},[s,Re(V).toString(),V.size]),se=function(f){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,A=k.length,g=0;g<A;g+=1){var M=(f+g*x+A)%A,L=k[M]||{},z=L.group,F=L.data;if(!z&&!(F!=null&&F.disabled)&&(Y(F.value)||!X))return M}return-1},W=t.useState(function(){return se(0)}),T=ee(W,2),D=T[0],ie=T[1],Ie=function(f){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ie(f);var A={source:x?"keyboard":"mouse"},g=k[f];if(!g){y(null,-1,A);return}y(g.value,f,A)};t.useEffect(function(){Ie(N!==!1?se(0):-1)},[k.length,m]);var he=t.useCallback(function(E){return s==="combobox"?String(E).toLowerCase()===m.toLowerCase():V.has(E)},[s,m,Re(V).toString(),V.size]);t.useEffect(function(){var E=setTimeout(function(){if(!c&&u&&V.size===1){var x=Array.from(V)[0],A=k.findIndex(function(g){var M=g.data;return m?String(M.value).startsWith(m):M.value===x});A!==-1&&(Ie(A),ue(A))}});if(u){var f;(f=Q.current)===null||f===void 0||f.scrollTo(void 0)}return function(){return clearTimeout(E)}},[u,m]);var j=function(f){f!==void 0&&oe(f,{selected:!V.has(f)}),c||d(!1)};if(t.useImperativeHandle(o,function(){return{onKeyDown:function(f){var x=f.which,A=f.ctrlKey;switch(x){case I.N:case I.P:case I.UP:case I.DOWN:{var g=0;if(x===I.UP?g=-1:x===I.DOWN?g=1:ea()&&A&&(x===I.N?g=1:x===I.P&&(g=-1)),g!==0){var M=se(D+g,g);ue(M),Ie(M,!0)}break}case I.TAB:case I.ENTER:{var L,z=k[D];z&&!(z!=null&&(L=z.data)!==null&&L!==void 0&&L.disabled)&&!X?j(z.value):j(void 0),u&&f.preventDefault();break}case I.ESC:d(!1),u&&f.stopPropagation()}},onKeyUp:function(){},scrollTo:function(f){ue(f)}}}),k.length===0)return t.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(G,"-empty"),onMouseDown:$},h);var Ne=Object.keys(ne).map(function(E){return ne[E]}),q=function(f){return f.label};function ke(E,f){var x=E.group;return{role:x?"presentation":"option",id:"".concat(i,"_list_").concat(f)}}var De=function(f){var x=k[f];if(!x)return null;var A=x.data||{},g=A.value,M=x.group,L=pn(A,!0),z=q(x);return x?t.createElement("div",We({"aria-label":typeof z=="string"&&!M?z:null},L,{key:f},ke(x,f),{"aria-selected":he(g)}),g):null},ve={role:"listbox",id:"".concat(i,"_list")};return t.createElement(t.Fragment,null,te&&t.createElement("div",We({},ve,{style:{height:0,width:0,overflow:"hidden"}}),De(D-1),De(D),De(D+1)),t.createElement(xt,{itemKey:"key",ref:Q,data:k,height:fe,itemHeight:U,fullHeight:!1,onMouseDown:$,onScroll:P,virtual:te,direction:le,innerProps:te?null:ve},function(E,f){var x=E.group,A=E.groupOption,g=E.data,M=E.label,L=E.value,z=g.key;if(x){var F,me=(F=g.title)!==null&&F!==void 0?F:Bn(M)?M.toString():void 0;return t.createElement("div",{className:Ue(G,"".concat(G,"-group"),g.className),title:me},M!==void 0?M:z)}var xe=g.disabled,Ve=g.title;g.children;var Te=g.style,J=g.className,Qe=Je(g,na),je=wt(Qe,Ne),pe=Y(L),be=xe||!pe&&X,Se="".concat(G,"-option"),ye=Ue(G,Se,J,Z(Z(Z(Z({},"".concat(Se,"-grouped"),A),"".concat(Se,"-active"),D===f&&!be),"".concat(Se,"-disabled"),be),"".concat(Se,"-selected"),pe)),Me=q(E),tn=!H||typeof H=="function"||pe,_e=typeof Me=="number"?Me:Me||L,Ae=Bn(_e)?_e.toString():void 0;return Ve!==void 0&&(Ae=Ve),t.createElement("div",We({},pn(je),te?{}:ke(E,f),{"aria-selected":he(L),className:ye,title:Ae,onMouseMove:function(){D===f||be||Ie(f)},onClick:function(){be||j(L)},style:Te}),t.createElement("div",{className:"".concat(Se,"-content")},typeof ce=="function"?ce(E,{index:f}):_e),t.isValidElement(H)||pe,tn&&t.createElement(hn,{className:"".concat(G,"-option-state"),customizeIcon:H,customizeIconProps:{value:L,disabled:be,isSelected:pe}},pe?"✓":null))}))},aa=t.forwardRef(ta);const ra=function(n,e){var o=t.useRef({values:new Map,options:new Map}),a=t.useMemo(function(){var i=o.current,u=i.values,c=i.options,s=n.map(function(h){if(h.label===void 0){var P;return B(B({},h),{},{label:(P=u.get(h.value))===null||P===void 0?void 0:P.label})}return h}),m=new Map,d=new Map;return s.forEach(function(h){m.set(h.value,h),d.set(h.value,e.get(h.value)||c.get(h.value))}),o.current.values=m,o.current.options=d,s},[n,e]),r=t.useCallback(function(i){return e.get(i)||o.current.options.get(i)},[e]);return[a,r]};function Rn(n,e){return jn(n).join("").toUpperCase().includes(e)}const oa=function(n,e,o,a,r){return t.useMemo(function(){if(!o||a===!1)return n;var i=e.options,u=e.label,c=e.value,s=[],m=typeof a=="function",d=o.toUpperCase(),h=m?a:function(l,C){return r?Rn(C[r],d):C[i]?Rn(C[u!=="children"?u:"label"],d):Rn(C[c],d)},P=m?function(l){return Mn(l)}:function(l){return l};return n.forEach(function(l){if(l[i]){var C=h(o,P(l));if(C)s.push(l);else{var S=l[i].filter(function(y){return h(o,P(y))});S.length&&s.push(B(B({},l),{},Z({},i,S)))}return}h(o,P(l))&&s.push(l)}),s},[n,a,r,o,e])};var $n=0,ua=Ct();function ia(){var n;return ua?(n=$n,$n+=1):n="TEST_OR_SSR",n}function la(n){var e=t.useState(),o=ee(e,2),a=o[0],r=o[1];return t.useEffect(function(){r("rc_select_".concat(ia()))},[]),n||a}var ca=["children","value"],sa=["children"];function da(n){var e=n,o=e.key,a=e.props,r=a.children,i=a.value,u=Je(a,ca);return B({key:o,value:i!==void 0?i:o,children:r},u)}function Qn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return It(n).map(function(o,a){if(!t.isValidElement(o)||!o.type)return null;var r=o,i=r.type.isSelectOptGroup,u=r.key,c=r.props,s=c.children,m=Je(c,sa);return e||!i?da(o):B(B({key:"__RC_SELECT_GRP__".concat(u===null?a:u,"__"),label:u},m),{},{options:Qn(s)})}).filter(function(o){return o})}var fa=function(e,o,a,r,i){return t.useMemo(function(){var u=e,c=!e;c&&(u=Qn(o));var s=new Map,m=new Map,d=function(l,C,S){S&&typeof S=="string"&&l.set(C[S],C)},h=function P(l){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=0;S<l.length;S+=1){var y=l[S];!y[a.options]||C?(s.set(y[a.value],y),d(m,y,a.label),d(m,y,r),d(m,y,i)):P(y[a.options],!0)}};return h(u),{options:u,valueOptions:s,labelOptions:m}},[e,o,a,r,i])};function Wn(n){var e=t.useRef();e.current=n;var o=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return o}var va=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],ma=["inputValue"];function pa(n){return!n||gn(n)!=="object"}var ga=t.forwardRef(function(n,e){var o=n.id,a=n.mode,r=n.prefixCls,i=r===void 0?"rc-select":r,u=n.backfill,c=n.fieldNames,s=n.inputValue,m=n.searchValue,d=n.onSearch,h=n.autoClearSearchValue,P=h===void 0?!0:h,l=n.onSelect,C=n.onDeselect,S=n.dropdownMatchSelectWidth,y=S===void 0?!0:S,N=n.filterOption,oe=n.filterSort,H=n.optionFilterProp,V=n.optionLabelProp,ne=n.options,te=n.optionRender,le=n.children,fe=n.defaultActiveFirstOption,U=n.menuItemSelectedIcon,ce=n.virtual,G=n.direction,k=n.listHeight,Q=k===void 0?200:k,X=n.listItemHeight,$=X===void 0?20:X,ue=n.labelRender,Y=n.value,se=n.defaultValue,W=n.labelInValue,T=n.onChange,D=n.maxCount,ie=Je(n,va),Ie=la(o),he=On(a),j=!!(!ne&&le),Ne=t.useMemo(function(){return N===void 0&&a==="combobox"?!1:N},[N,a]),q=t.useMemo(function(){return Xn(c,j)},[JSON.stringify(c),j]),ke=xn("",{value:m!==void 0?m:s,postState:function(w){return w||""}}),De=ee(ke,2),ve=De[0],E=De[1],f=fa(ne,le,q,H,V),x=f.valueOptions,A=f.labelOptions,g=f.options,M=t.useCallback(function(v){var w=jn(v);return w.map(function(p){var b,_,K,Ke,Le;if(pa(p))b=p;else{var ze;K=p.key,_=p.label,b=(ze=p.value)!==null&&ze!==void 0?ze:K}var de=x.get(b);if(de){var He;_===void 0&&(_=de==null?void 0:de[V||q.label]),K===void 0&&(K=(He=de==null?void 0:de.key)!==null&&He!==void 0?He:b),Ke=de==null?void 0:de.disabled,Le=de==null?void 0:de.title}return{label:_,value:b,key:K,disabled:Ke,title:Le}})},[q,V,x]),L=xn(se,{value:Y}),z=ee(L,2),F=z[0],me=z[1],xe=t.useMemo(function(){var v,w=he&&F===null?[]:F,p=M(w);return a==="combobox"&&Ft((v=p[0])===null||v===void 0?void 0:v.value)?[]:p},[F,M,a,he]),Ve=ra(xe,x),Te=ee(Ve,2),J=Te[0],Qe=Te[1],je=t.useMemo(function(){if(!a&&J.length===1){var v=J[0];if(v.value===null&&(v.label===null||v.label===void 0))return[]}return J.map(function(w){var p;return B(B({},w),{},{label:(p=typeof ue=="function"?ue(w):w.label)!==null&&p!==void 0?p:w.value})})},[a,J,ue]),pe=t.useMemo(function(){return new Set(J.map(function(v){return v.value}))},[J]);t.useEffect(function(){if(a==="combobox"){var v,w=(v=J[0])===null||v===void 0?void 0:v.value;E(Lt(w)?String(w):"")}},[J]);var be=Wn(function(v,w){var p=w??v;return Z(Z({},q.value,v),q.label,p)}),Se=t.useMemo(function(){if(a!=="tags")return g;var v=Re(g),w=function(b){return x.has(b)};return Re(J).sort(function(p,b){return p.value<b.value?-1:1}).forEach(function(p){var b=p.value;w(b)||v.push(be(b,p.label))}),v},[be,g,x,J,a]),ye=oa(Se,q,ve,Ne,H),Me=t.useMemo(function(){return a!=="tags"||!ve||ye.some(function(v){return v[H||"value"]===ve})||ye.some(function(v){return v[q.value]===ve})?ye:[be(ve)].concat(Re(ye))},[be,H,a,ye,ve,q]),tn=function v(w){var p=Re(w).sort(function(b,_){return oe(b,_,{searchValue:ve})});return p.map(function(b){return Array.isArray(b.options)?B(B({},b),{},{options:b.options.length>0?v(b.options):b.options}):b})},_e=t.useMemo(function(){return oe?tn(Me):Me},[Me,oe,ve]),Ae=t.useMemo(function(){return Xt(_e,{fieldNames:q,childrenAsData:j})},[_e,q,j]),Oe=function(w){var p=M(w);if(me(p),T&&(p.length!==J.length||p.some(function(K,Ke){var Le;return((Le=J[Ke])===null||Le===void 0?void 0:Le.value)!==(K==null?void 0:K.value)}))){var b=W?p:p.map(function(K){return K.value}),_=p.map(function(K){return Mn(Qe(K.value))});T(he?b:b[0],he?_:_[0])}},bn=t.useState(null),Pe=ee(bn,2),un=Pe[0],Ee=Pe[1],Sn=t.useState(0),ln=ee(Sn,2),cn=ln[0],wn=ln[1],sn=fe!==void 0?fe:a!=="combobox",dn=t.useCallback(function(v,w){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=p.source,_=b===void 0?"keyboard":b;wn(w),u&&a==="combobox"&&v!==null&&_==="keyboard"&&Ee(String(v))},[u,a]),Ge=function(w,p,b){var _=function(){var on,Be=Qe(w);return[W?{label:Be==null?void 0:Be[q.label],value:w,key:(on=Be==null?void 0:Be.key)!==null&&on!==void 0?on:w}:w,Mn(Be)]};if(p&&l){var K=_(),Ke=ee(K,2),Le=Ke[0],ze=Ke[1];l(Le,ze)}else if(!p&&C&&b!=="clear"){var de=_(),He=ee(de,2),Ze=He[0],Cn=He[1];C(Ze,Cn)}},an=Wn(function(v,w){var p,b=he?w.selected:!0;b?p=he?[].concat(Re(J),[v]):[v]:p=J.filter(function(_){return _.value!==v}),Oe(p),Ge(v,b),a==="combobox"?Ee(""):(!On||P)&&(E(""),Ee(""))}),rn=function(w,p){Oe(w);var b=p.type,_=p.values;(b==="remove"||b==="clear")&&_.forEach(function(K){Ge(K.value,!1,b)})},ae=function(w,p){if(E(w),Ee(null),p.source==="submit"){var b=(w||"").trim();if(b){var _=Array.from(new Set([].concat(Re(pe),[b])));Oe(_),Ge(b,!0),E("")}return}p.source!=="blur"&&(a==="combobox"&&Oe(w),d==null||d(w))},fn=function(w){var p=w;a!=="tags"&&(p=w.map(function(_){var K=A.get(_);return K==null?void 0:K.value}).filter(function(_){return _!==void 0}));var b=Array.from(new Set([].concat(Re(pe),Re(p))));Oe(b),b.forEach(function(_){Ge(_,!0)})},qe=t.useMemo(function(){var v=ce!==!1&&y!==!1;return B(B({},f),{},{flattenOptions:Ae,onActiveValue:dn,defaultActiveFirstOption:sn,onSelect:an,menuItemSelectedIcon:U,rawValues:pe,fieldNames:q,virtual:v,direction:G,listHeight:Q,listItemHeight:$,childrenAsData:j,maxCount:D,optionRender:te})},[D,f,Ae,dn,sn,an,U,pe,q,ce,y,G,Q,$,j,te]);return t.createElement(Pn.Provider,{value:qe},t.createElement(Zt,We({},ie,{id:Ie,prefixCls:i,ref:e,omitDomProps:ma,mode:a,displayValues:je,onDisplayValuesChange:rn,direction:G,searchValue:ve,onSearch:ae,autoClearSearchValue:P,onSearchSplit:fn,dropdownMatchSelectWidth:y,OptionList:aa,emptyOptions:!Ae.length,activeValue:un,activeDescendantId:"".concat(Ie,"_list_").concat(cn)})))}),qn=ga;qn.Option=Jn;qn.OptGroup=Yn;export{Jn as O,qn as T,Yn as a};
