import{r as g,j as i}from"./react-00db08bf.js";import{a as M,g as E,B as p,m as R}from"./antd-e6cfab4a.js";import"./classnames-cee3b7bb.js";import"./rc-util-7b686e84.js";import"./@babel-3e973216.js";import"./react-dom-a3d1ea1f.js";import"./scheduler-765c72db.js";import"./react-is-e5978b8b.js";import"./@ant-design-12de479f.js";import"./@emotion-c0b5c018.js";import"./stylis-9f03583a.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-resize-observer-9b0f7ff6.js";import"./rc-motion-c0cfda94.js";import"./@rc-component-415d57ed.js";import"./rc-overflow-a40a59d2.js";import"./rc-tabs-4292c127.js";import"./rc-dropdown-4787d021.js";import"./rc-menu-d10600ad.js";import"./rc-select-95006f2c.js";import"./rc-virtual-list-2144575c.js";import"./rc-field-form-8e2838d5.js";import"./scroll-into-view-if-needed-448e2d96.js";import"./compute-scroll-into-view-dd0749eb.js";import"./rc-dialog-410aaeda.js";import"./rc-pagination-bbf38588.js";import"./throttle-debounce-87e7e444.js";import"./rc-notification-de8dcb4c.js";import"./rc-tooltip-d1964ef4.js";import"./rc-picker-0bd60a3a.js";import"./rc-textarea-b2d01384.js";import"./rc-input-1f58169b.js";import"./copy-to-clipboard-196009f6.js";import"./toggle-selection-93f4ad84.js";const rt=()=>{const r=g.useRef(null),[d,a]=g.useState(!1),h=t=>{a(!0);const o=r.current;if(o){const e=o.getContext("2d");e&&(e.beginPath(),e.moveTo(t.nativeEvent.offsetX,t.nativeEvent.offsetY))}},x=t=>{if(!d)return;const o=r.current;if(o){const e=o.getContext("2d");e&&(e.lineTo(t.nativeEvent.offsetX,t.nativeEvent.offsetY),e.stroke())}},u=()=>{a(!1)},v=()=>{const t=r.current;if(t){const o=t.getContext("2d");o&&o.clearRect(0,0,t.width,t.height)}},w=()=>{const t=r.current;if(t){const o=t.toDataURL("image/png"),e=document.createElement("a");e.href=o,e.download="design.png",e.click()}},C=t=>{var c;const o=(c=t.target.files)==null?void 0:c[0];if(!o)return;const e=new FileReader;e.onload=function(n){var f;const l=new window.Image;l.onload=function(){const s=r.current;if(s){const m=s.getContext("2d");m&&(m.clearRect(0,0,s.width,s.height),m.drawImage(l,0,0,s.width,s.height),R.success("图片导入成功"))}},(f=n.target)!=null&&f.result&&(l.src=n.target.result)},e.readAsDataURL(o),t.target.value=""},j=()=>typeof window<"u"?Math.min(window.innerWidth-32,600):600;return i.jsx("div",{className:"max-w-3xl mx-auto py-8 px-2",children:i.jsxs(M,{title:"室内设计画图制作室",className:"shadow-lg rounded-xl",children:[i.jsx("canvas",{ref:r,width:j(),height:400,style:{border:"1px solid #ccc",background:"#fff",width:"100%",touchAction:"none"},onMouseDown:h,onMouseMove:x,onMouseUp:u,onMouseLeave:u,onTouchStart:t=>{const o=t.touches[0];if(!o)return;a(!0);const e=r.current;if(e){const c=e.getBoundingClientRect(),n=e.getContext("2d");n&&(n.beginPath(),n.moveTo(o.clientX-c.left,o.clientY-c.top))}},onTouchMove:t=>{if(!d)return;const o=t.touches[0];if(!o)return;const e=r.current;if(e){const c=e.getBoundingClientRect(),n=e.getContext("2d");n&&(n.lineTo(o.clientX-c.left,o.clientY-c.top),n.stroke())}},onTouchEnd:()=>a(!1)}),i.jsxs(E,{style:{marginTop:16},wrap:!0,children:[i.jsx(p,{onClick:v,children:"清空画布"}),i.jsx(p,{onClick:w,children:"导出图片"}),i.jsx(p,{onClick:()=>{var t;return(t=document.getElementById("import-img"))==null?void 0:t.click()},children:"导入图片"}),i.jsx("input",{id:"import-img",type:"file",accept:"image/*",style:{display:"none"},onChange:C})]}),i.jsx("p",{style:{marginTop:16,color:"#888"},children:"支持鼠标或手指绘制，支持导入/导出图片。"})]})})};export{rt as default};
