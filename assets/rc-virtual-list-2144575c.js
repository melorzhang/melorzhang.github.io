import{e as B,b as I,g as ct,c as H,d as Xe,_ as Tt,a as zt,k as Dt}from"./@babel-3e973216.js";import{c as ze}from"./classnames-cee3b7bb.js";import{R as ft}from"./rc-resize-observer-9b0f7ff6.js";import{x as G,u as Re,j as rt}from"./rc-util-7b686e84.js";import{r as t}from"./react-00db08bf.js";import{r as nt}from"./react-dom-a3d1ea1f.js";var vt=t.forwardRef(function(e,o){var u=e.height,l=e.offsetY,h=e.offsetX,g=e.children,f=e.prefixCls,s=e.onInnerResize,M=e.innerProps,m=e.rtl,R=e.extra,n={},S={display:"flex",flexDirection:"column"};return l!==void 0&&(n={height:u,position:"relative",overflow:"hidden"},S=B(B({},S),{},I(I(I(I(I({transform:"translateY(".concat(l,"px)")},m?"marginRight":"marginLeft",-h),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(ft,{onResize:function(v){var c=v.offsetHeight;c&&s&&s()}},t.createElement("div",ct({style:S,className:ze(I({},"".concat(f,"-holder-inner"),f)),ref:o},M),g,R)))});vt.displayName="Filler";function Ct(e){var o=e.children,u=e.setRef,l=t.useCallback(function(h){u(h)},[]);return t.cloneElement(o,{ref:l})}function Ht(e,o,u,l,h,g,f,s){var M=s.getKey;return e.slice(o,u+1).map(function(m,R){var n=o+R,S=f(m,n,{style:{width:l},offsetX:h}),a=M(m);return t.createElement(Ct,{key:a,setRef:function(c){return g(m,c)}},S)})}function Pt(e,o,u){var l=e.length,h=o.length,g,f;if(l===0&&h===0)return null;l<h?(g=e,f=o):(g=o,f=e);var s={__EMPTY_ITEM__:!0};function M(v){return v!==void 0?u(v):s}for(var m=null,R=Math.abs(l-h)!==1,n=0;n<f.length;n+=1){var S=M(g[n]),a=M(f[n]);if(S!==a){m=n,R=R||S!==M(f[n+1]);break}}return m===null?null:{index:m,multiple:R}}function It(e,o,u){var l=t.useState(e),h=H(l,2),g=h[0],f=h[1],s=t.useState(null),M=H(s,2),m=M[0],R=M[1];return t.useEffect(function(){var n=Pt(g||[],e||[],o);(n==null?void 0:n.index)!==void 0&&(u==null||u(n.index),R(e[n.index])),f(e)},[e]),[m]}var at=(typeof navigator>"u"?"undefined":Xe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const dt=function(e,o,u,l){var h=t.useRef(!1),g=t.useRef(null);function f(){clearTimeout(g.current),h.current=!0,g.current=setTimeout(function(){h.current=!1},50)}var s=t.useRef({top:e,bottom:o,left:u,right:l});return s.current.top=e,s.current.bottom=o,s.current.left=u,s.current.right=l,function(M,m){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=M?m<0&&s.current.left||m>0&&s.current.right:m<0&&s.current.top||m>0&&s.current.bottom;return R&&n?(clearTimeout(g.current),h.current=!1):(!n||h.current)&&f(),!h.current&&n}};function kt(e,o,u,l,h,g,f){var s=t.useRef(0),M=t.useRef(null),m=t.useRef(null),R=t.useRef(!1),n=dt(o,u,l,h);function S(d,y){if(G.cancel(M.current),!n(!1,y)){var w=d;if(!w._virtualHandled)w._virtualHandled=!0;else return;s.current+=y,m.current=y,at||w.preventDefault(),M.current=G(function(){var k=R.current?10:1;f(s.current*k,!1),s.current=0})}}function a(d,y){f(y,!0),at||d.preventDefault()}var v=t.useRef(null),c=t.useRef(null);function b(d){if(e){G.cancel(c.current),c.current=G(function(){v.current=null},2);var y=d.deltaX,w=d.deltaY,k=d.shiftKey,N=y,x=w;(v.current==="sx"||!v.current&&k&&w&&!y)&&(N=w,x=0,v.current="sx");var O=Math.abs(N),X=Math.abs(x);v.current===null&&(v.current=g&&O>X?"x":"y"),v.current==="y"?S(d,x):a(d,N)}}function E(d){e&&(R.current=d.detail===m.current)}return[b,E]}function Nt(e,o,u,l){var h=t.useMemo(function(){return[new Map,[]]},[e,u.id,l]),g=H(h,2),f=g[0],s=g[1],M=function(R){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,S=f.get(R),a=f.get(n);if(S===void 0||a===void 0)for(var v=e.length,c=s.length;c<v;c+=1){var b,E=e[c],d=o(E);f.set(d,c);var y=(b=u.get(d))!==null&&b!==void 0?b:l;if(s[c]=(s[c-1]||0)+y,d===R&&(S=c),d===n&&(a=c),S!==void 0&&a!==void 0)break}return{top:s[S-1]||0,bottom:s[a]}};return M}var Ot=function(){function e(){zt(this,e),I(this,"maps",void 0),I(this,"id",0),I(this,"diffRecords",new Map),this.maps=Object.create(null)}return Tt(e,[{key:"set",value:function(u,l){this.diffRecords.set(u,this.maps[u]),this.maps[u]=l,this.id+=1}},{key:"get",value:function(u){return this.maps[u]}},{key:"resetRecord",value:function(){this.diffRecords.clear()}},{key:"getRecord",value:function(){return this.diffRecords}}]),e}();function it(e){var o=parseFloat(e);return isNaN(o)?0:o}function $t(e,o,u){var l=t.useState(0),h=H(l,2),g=h[0],f=h[1],s=t.useRef(new Map),M=t.useRef(new Ot),m=t.useRef(0);function R(){m.current+=1}function n(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var v=function(){var E=!1;s.current.forEach(function(d,y){if(d&&d.offsetParent){var w=d.offsetHeight,k=getComputedStyle(d),N=k.marginTop,x=k.marginBottom,O=it(N),X=it(x),j=w+O+X;M.current.get(y)!==j&&(M.current.set(y,j),E=!0)}}),E&&f(function(d){return d+1})};if(a)v();else{m.current+=1;var c=m.current;Promise.resolve().then(function(){c===m.current&&v()})}}function S(a,v){var c=e(a),b=s.current.get(c);v?(s.current.set(c,v),n()):s.current.delete(c),!b!=!v&&(v?o==null||o(a):u==null||u(a))}return t.useEffect(function(){return R},[]),[S,n,M.current,g]}var ut=14/15;function Bt(e,o,u){var l=t.useRef(!1),h=t.useRef(0),g=t.useRef(0),f=t.useRef(null),s=t.useRef(null),M,m=function(a){if(l.current){var v=Math.ceil(a.touches[0].pageX),c=Math.ceil(a.touches[0].pageY),b=h.current-v,E=g.current-c,d=Math.abs(b)>Math.abs(E);d?h.current=v:g.current=c;var y=u(d,d?b:E,!1,a);y&&a.preventDefault(),clearInterval(s.current),y&&(s.current=setInterval(function(){d?b*=ut:E*=ut;var w=Math.floor(d?b:E);(!u(d,w,!0)||Math.abs(w)<=.1)&&clearInterval(s.current)},16))}},R=function(){l.current=!1,M()},n=function(a){M(),a.touches.length===1&&!l.current&&(l.current=!0,h.current=Math.ceil(a.touches[0].pageX),g.current=Math.ceil(a.touches[0].pageY),f.current=a.target,f.current.addEventListener("touchmove",m,{passive:!1}),f.current.addEventListener("touchend",R,{passive:!0}))};M=function(){f.current&&(f.current.removeEventListener("touchmove",m),f.current.removeEventListener("touchend",R))},Re(function(){return e&&o.current.addEventListener("touchstart",n,{passive:!0}),function(){var S;(S=o.current)===null||S===void 0||S.removeEventListener("touchstart",n),M(),clearInterval(s.current)}},[e])}function ot(e){return Math.floor(Math.pow(e,.5))}function Ye(e,o){var u="touches"in e?e.touches[0]:e;return u[o?"pageX":"pageY"]-window[o?"scrollX":"scrollY"]}function Ft(e,o,u){t.useEffect(function(){var l=o.current;if(e&&l){var h=!1,g,f,s=function(){G.cancel(g)},M=function S(){s(),g=G(function(){u(f),S()})},m=function(a){if(!(a.target.draggable||a.button!==0)){var v=a;v._virtualHandled||(v._virtualHandled=!0,h=!0)}},R=function(){h=!1,s()},n=function(a){if(h){var v=Ye(a,!1),c=l.getBoundingClientRect(),b=c.top,E=c.bottom;if(v<=b){var d=b-v;f=-ot(d),M()}else if(v>=E){var y=v-E;f=ot(y),M()}else s()}};return l.addEventListener("mousedown",m),l.ownerDocument.addEventListener("mouseup",R),l.ownerDocument.addEventListener("mousemove",n),function(){l.removeEventListener("mousedown",m),l.ownerDocument.removeEventListener("mouseup",R),l.ownerDocument.removeEventListener("mousemove",n),s()}}},[e])}var Yt=10;function Xt(e,o,u,l,h,g,f,s){var M=t.useRef(),m=t.useState(null),R=H(m,2),n=R[0],S=R[1];return Re(function(){if(n&&n.times<Yt){if(!e.current){S(function(ne){return B({},ne)});return}g();var a=n.targetAlign,v=n.originAlign,c=n.index,b=n.offset,E=e.current.clientHeight,d=!1,y=a,w=null;if(E){for(var k=a||v,N=0,x=0,O=0,X=Math.min(o.length-1,c),j=0;j<=X;j+=1){var F=h(o[j]);x=N;var Q=u.get(F);O=x+(Q===void 0?l:Q),N=O}for(var A=k==="top"?b:E-b,ee=X;ee>=0;ee-=1){var te=h(o[ee]),P=u.get(te);if(P===void 0){d=!0;break}if(A-=P,A<=0)break}switch(k){case"top":w=x-b;break;case"bottom":w=O-E+b;break;default:{var re=e.current.scrollTop,$=re+E;x<re?y="top":O>$&&(y="bottom")}}w!==null&&f(w),w!==n.lastTop&&(d=!0)}d&&S(B(B({},n),{},{times:n.times+1,targetAlign:y,lastTop:w}))}},[n,e.current]),function(a){if(a==null){s();return}if(G.cancel(M.current),typeof a=="number")f(a);else if(a&&Xe(a)==="object"){var v,c=a.align;"index"in a?v=a.index:v=o.findIndex(function(d){return h(d)===a.key});var b=a.offset,E=b===void 0?0:b;S({times:0,index:v,offset:E,originAlign:c})}}}var lt=t.forwardRef(function(e,o){var u=e.prefixCls,l=e.rtl,h=e.scrollOffset,g=e.scrollRange,f=e.onStartMove,s=e.onStopMove,M=e.onScroll,m=e.horizontal,R=e.spinSize,n=e.containerSize,S=e.style,a=e.thumbStyle,v=e.showScrollBar,c=t.useState(!1),b=H(c,2),E=b[0],d=b[1],y=t.useState(null),w=H(y,2),k=w[0],N=w[1],x=t.useState(null),O=H(x,2),X=O[0],j=O[1],F=!l,Q=t.useRef(),A=t.useRef(),ee=t.useState(v),te=H(ee,2),P=te[0],re=te[1],$=t.useRef(),ne=function(){v===!0||v===!1||(clearTimeout($.current),re(!0),$.current=setTimeout(function(){re(!1)},3e3))},V=g-n||0,W=n-R||0,ae=t.useMemo(function(){if(h===0||V===0)return 0;var Y=h/V;return Y*W},[h,V,W]),T=function(z){z.stopPropagation(),z.preventDefault()},K=t.useRef({top:ae,dragging:E,pageY:k,startTop:X});K.current={top:ae,dragging:E,pageY:k,startTop:X};var se=function(z){d(!0),N(Ye(z,m)),j(K.current.top),f(),z.stopPropagation(),z.preventDefault()};t.useEffect(function(){var Y=function(he){he.preventDefault()},z=Q.current,D=A.current;return z.addEventListener("touchstart",Y,{passive:!1}),D.addEventListener("touchstart",se,{passive:!1}),function(){z.removeEventListener("touchstart",Y),D.removeEventListener("touchstart",se)}},[]);var de=t.useRef();de.current=V;var pe=t.useRef();pe.current=W,t.useEffect(function(){if(E){var Y,z=function(he){var ce=K.current,De=ce.dragging,Me=ce.pageY,be=ce.startTop;G.cancel(Y);var me=Q.current.getBoundingClientRect(),Ce=n/(m?me.width:me.height);if(De){var q=(Ye(he,m)-Me)*Ce,fe=be;!F&&m?fe-=q:fe+=q;var Ee=de.current,ye=pe.current,He=ye?fe/ye:0,ue=Math.ceil(He*Ee);ue=Math.max(ue,0),ue=Math.min(ue,Ee),Y=G(function(){M(ue,m)})}},D=function(){d(!1),s()};return window.addEventListener("mousemove",z,{passive:!0}),window.addEventListener("touchmove",z,{passive:!0}),window.addEventListener("mouseup",D,{passive:!0}),window.addEventListener("touchend",D,{passive:!0}),function(){window.removeEventListener("mousemove",z),window.removeEventListener("touchmove",z),window.removeEventListener("mouseup",D),window.removeEventListener("touchend",D),G.cancel(Y)}}},[E]),t.useEffect(function(){return ne(),function(){clearTimeout($.current)}},[h]),t.useImperativeHandle(o,function(){return{delayHidden:ne}});var Z="".concat(u,"-scrollbar"),_={position:"absolute",visibility:P?null:"hidden"},U={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return m?(_.height=8,_.left=0,_.right=0,_.bottom=0,U.height="100%",U.width=R,F?U.left=ae:U.right=ae):(_.width=8,_.top=0,_.bottom=0,F?_.right=0:_.left=0,U.width="100%",U.height=R,U.top=ae),t.createElement("div",{ref:Q,className:ze(Z,I(I(I({},"".concat(Z,"-horizontal"),m),"".concat(Z,"-vertical"),!m),"".concat(Z,"-visible"),P)),style:B(B({},_),S),onMouseDown:T,onMouseMove:ne},t.createElement("div",{ref:A,className:ze("".concat(Z,"-thumb"),I({},"".concat(Z,"-thumb-moving"),E)),style:B(B({},U),a),onMouseDown:se}))}),Wt=20;function st(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=e/o*e;return isNaN(u)&&(u=0),u=Math.max(u,Wt),Math.floor(u)}var Vt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],jt=[],At={overflowY:"auto",overflowAnchor:"none"};function Kt(e,o){var u=e.prefixCls,l=u===void 0?"rc-virtual-list":u,h=e.className,g=e.height,f=e.itemHeight,s=e.fullHeight,M=s===void 0?!0:s,m=e.style,R=e.data,n=e.children,S=e.itemKey,a=e.virtual,v=e.direction,c=e.scrollWidth,b=e.component,E=b===void 0?"div":b,d=e.onScroll,y=e.onVirtualScroll,w=e.onVisibleChange,k=e.innerProps,N=e.extraRender,x=e.styles,O=e.showScrollBar,X=O===void 0?"optional":O,j=Dt(e,Vt),F=t.useCallback(function(i){return typeof S=="function"?S(i):i==null?void 0:i[S]},[S]),Q=$t(F,null,null),A=H(Q,4),ee=A[0],te=A[1],P=A[2],re=A[3],$=!!(a!==!1&&g&&f),ne=t.useMemo(function(){return Object.values(P.maps).reduce(function(i,r){return i+r},0)},[P.id,P.maps]),V=$&&R&&(Math.max(f*R.length,ne)>g||!!c),W=v==="rtl",ae=ze(l,I({},"".concat(l,"-rtl"),W),h),T=R||jt,K=t.useRef(),se=t.useRef(),de=t.useRef(),pe=t.useState(0),Z=H(pe,2),_=Z[0],U=Z[1],Y=t.useState(0),z=H(Y,2),D=z[0],ie=z[1],he=t.useState(!1),ce=H(he,2),De=ce[0],Me=ce[1],be=function(){Me(!0)},me=function(){Me(!1)},Ce={getKey:F};function q(i){U(function(r){var p;typeof i=="function"?p=i(r):p=i;var L=pt(p);return K.current.scrollTop=L,L})}var fe=t.useRef({start:0,end:T.length}),Ee=t.useRef(),ye=It(T,F),He=H(ye,1),ue=He[0];Ee.current=ue;var we=t.useMemo(function(){if(!$)return{scrollHeight:void 0,start:0,end:T.length-1,offset:void 0};if(!V){var i;return{scrollHeight:((i=se.current)===null||i===void 0?void 0:i.offsetHeight)||0,start:0,end:T.length-1,offset:void 0}}for(var r=0,p,L,C,Te=T.length,le=0;le<Te;le+=1){var Be=T[le],_t=F(Be),tt=P.get(_t),Fe=r+(tt===void 0?f:tt);Fe>=_&&p===void 0&&(p=le,L=r),Fe>_+g&&C===void 0&&(C=le),r=Fe}return p===void 0&&(p=0,L=0,C=Math.ceil(g/f)),C===void 0&&(C=T.length-1),C=Math.min(C+1,T.length-1),{scrollHeight:r,start:p,end:C,offset:L}},[V,$,_,T,re,g]),oe=we.scrollHeight,ve=we.start,ge=we.end,We=we.offset;fe.current.start=ve,fe.current.end=ge,t.useLayoutEffect(function(){var i=P.getRecord();if(i.size===1){var r=Array.from(i.keys())[0],p=i.get(r),L=T[ve];if(L&&p===void 0){var C=F(L);if(C===r){var Te=P.get(r),le=Te-f;q(function(Be){return Be+le})}}}P.resetRecord()},[oe]);var ht=t.useState({width:0,height:g}),Ve=H(ht,2),J=Ve[0],mt=Ve[1],gt=function(r){mt({width:r.offsetWidth,height:r.offsetHeight})},je=t.useRef(),Ae=t.useRef(),St=t.useMemo(function(){return st(J.width,c)},[J.width,c]),Rt=t.useMemo(function(){return st(J.height,oe)},[J.height,oe]),Pe=oe-g,Ie=t.useRef(Pe);Ie.current=Pe;function pt(i){var r=i;return Number.isNaN(Ie.current)||(r=Math.min(r,Ie.current)),r=Math.max(r,0),r}var xe=_<=0,Le=_>=Pe,Ke=D<=0,Ue=D>=c,Mt=dt(xe,Le,Ke,Ue),ke=function(){return{x:W?-D:D,y:_}},Ne=t.useRef(ke()),_e=rt(function(i){if(y){var r=B(B({},ke()),i);(Ne.current.x!==r.x||Ne.current.y!==r.y)&&(y(r),Ne.current=r)}});function Ge(i,r){var p=i;r?(nt.flushSync(function(){ie(p)}),_e()):q(p)}function bt(i){var r=i.currentTarget.scrollTop;r!==_&&q(r),d==null||d(i),_e()}var Oe=function(r){var p=r,L=c?c-J.width:0;return p=Math.max(p,0),p=Math.min(p,L),p},Et=rt(function(i,r){r?(nt.flushSync(function(){ie(function(p){var L=p+(W?-i:i);return Oe(L)})}),_e()):q(function(p){var L=p+i;return L})}),yt=kt($,xe,Le,Ke,Ue,!!c,Et),Ze=H(yt,2),$e=Ze[0],qe=Ze[1];Bt($,K,function(i,r,p,L){var C=L;return Mt(i,r,p)?!1:!C||!C._virtualHandled?(C&&(C._virtualHandled=!0),$e({preventDefault:function(){},deltaX:i?r:0,deltaY:i?0:r}),!0):!1}),Ft(V,K,function(i){q(function(r){return r+i})}),Re(function(){function i(p){var L=xe&&p.detail<0,C=Le&&p.detail>0;$&&!L&&!C&&p.preventDefault()}var r=K.current;return r.addEventListener("wheel",$e,{passive:!1}),r.addEventListener("DOMMouseScroll",qe,{passive:!0}),r.addEventListener("MozMousePixelScroll",i,{passive:!1}),function(){r.removeEventListener("wheel",$e),r.removeEventListener("DOMMouseScroll",qe),r.removeEventListener("MozMousePixelScroll",i)}},[$,xe,Le]),Re(function(){if(c){var i=Oe(D);ie(i),_e({x:i})}},[J.width,c]);var Je=function(){var r,p;(r=je.current)===null||r===void 0||r.delayHidden(),(p=Ae.current)===null||p===void 0||p.delayHidden()},Qe=Xt(K,T,P,f,F,function(){return te(!0)},q,Je);t.useImperativeHandle(o,function(){return{nativeElement:de.current,getScrollInfo:ke,scrollTo:function(r){function p(L){return L&&Xe(L)==="object"&&("left"in L||"top"in L)}p(r)?(r.left!==void 0&&ie(Oe(r.left)),Qe(r.top)):Qe(r)}}}),Re(function(){if(w){var i=T.slice(ve,ge+1);w(i,T)}},[ve,ge,T]);var wt=Nt(T,F,P,f),xt=N==null?void 0:N({start:ve,end:ge,virtual:V,offsetX:D,offsetY:We,rtl:W,getSize:wt}),Lt=Ht(T,ve,ge,c,D,ee,n,Ce),Se=null;g&&(Se=B(I({},M?"height":"maxHeight",g),At),$&&(Se.overflowY="hidden",c&&(Se.overflowX="hidden"),De&&(Se.pointerEvents="none")));var et={};return W&&(et.dir="rtl"),t.createElement("div",ct({ref:de,style:B(B({},m),{},{position:"relative"}),className:ae},et,j),t.createElement(ft,{onResize:gt},t.createElement(E,{className:"".concat(l,"-holder"),style:Se,ref:K,onScroll:bt,onMouseEnter:Je},t.createElement(vt,{prefixCls:l,height:oe,offsetX:D,offsetY:We,scrollWidth:c,onInnerResize:te,ref:se,innerProps:k,rtl:W,extra:xt},Lt))),V&&oe>g&&t.createElement(lt,{ref:je,prefixCls:l,scrollOffset:_,scrollRange:oe,rtl:W,onScroll:Ge,onStartMove:be,onStopMove:me,spinSize:Rt,containerSize:J.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb,showScrollBar:X}),V&&c>J.width&&t.createElement(lt,{ref:Ae,prefixCls:l,scrollOffset:D,scrollRange:c,rtl:W,onScroll:Ge,onStartMove:be,onStopMove:me,spinSize:St,containerSize:J.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb,showScrollBar:X}))}var Ut=t.forwardRef(Kt);Ut.displayName="List";export{Ut as L};
